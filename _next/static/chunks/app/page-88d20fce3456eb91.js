(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3455:(e,l,t)=>{"use strict";t.d(l,{default:()=>f});var r=t(5155),o=t(2115);function n(e){return e.x>=0&&e.x<8&&e.y>=0&&e.y<8}function c(e,l,t){if(!n(l))return!1;let r=e[l.y][l.x];return!r||r.color!==t}function a(e,l,t){let r=[];for(let{dx:o,dy:c}of[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1}]){let a=e.x+o,s=e.y+c;for(;n({x:a,y:s});){let e=l[s][a];if(e){e.color!==t&&r.push({x:a,y:s});break}r.push({x:a,y:s}),a+=o,s+=c}}return r}function s(e,l,t){let r=[];for(let{dx:o,dy:n}of[{dx:1,dy:2},{dx:2,dy:1},{dx:-1,dy:2},{dx:-2,dy:1},{dx:1,dy:-2},{dx:2,dy:-1},{dx:-1,dy:-2},{dx:-2,dy:-1}]){let a={x:e.x+o,y:e.y+n};c(l,a,t)&&r.push(a)}return r}function u(e,l,t){let r=[];for(let{dx:o,dy:c}of[{dx:1,dy:1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:-1,dy:-1}]){let a=e.x+o,s=e.y+c;for(;n({x:a,y:s});){let e=l[s][a];if(e){e.color!==t&&r.push({x:a,y:s});break}r.push({x:a,y:s}),a+=o,s+=c}}return r}function i(e,l,t){return[...a(e,l,t),...u(e,l,t)]}function d(e,l,t){let r=[];for(let{dx:o,dy:n}of[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1},{dx:1,dy:1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:-1,dy:-1}]){let a={x:e.x+o,y:e.y+n};c(l,a,t)&&r.push(a)}return r}function p(e,l,t){for(let r=0;r<8;r++)for(let o=0;o<8;o++){let n=l[r][o];if(n&&n.color===t){let c=[];switch(n.type){case"pawn":let p="white"===t?-1:1;for(let l of[-1,1])if(o+l===e.x&&r+p===e.y)return!0;break;case"rook":c=a({x:o,y:r},l,t);break;case"knight":c=s({x:o,y:r},l,t);break;case"bishop":c=u({x:o,y:r},l,t);break;case"queen":c=i({x:o,y:r},l,t);break;case"king":c=d({x:o,y:r},l,t)}if(c.some(l=>l.x===e.x&&l.y===e.y))return!0}}return!1}t(3520);let h={pawn:(e,l,t,r)=>r?function(e,l,t,r){let o=[],c="white"===t?-1:1,a="white"===t?6:1,s={x:e.x,y:e.y+c};if(n(s)&&!l[s.y][s.x]){o.push(s);let t={x:e.x,y:e.y+2*c};e.y!==a||l[t.y][t.x]||l[s.y][s.x]||o.push(t)}for(let a of[-1,1]){var u;let s={x:e.x+a,y:e.y+c};n(s)&&l[s.y][s.x]&&(null===(u=l[s.y][s.x])||void 0===u?void 0:u.color)!==t&&o.push(s),function(e,l,t,r){if(!t.enPassantTarget||t.enPassantTarget.x!==l.x||t.enPassantTarget.y!==l.y||e.y!==("white"===r?3:4)||1!==Math.abs(e.x-l.x)||l.y!==e.y+("white"===r?-1:1))return!1;let o=t.moveHistory[t.moveHistory.length-1];return!!o&&"pawn"===o.piece.type&&2===Math.abs(o.from.y-o.to.y)&&o.to.x===l.x&&o.to.y===e.y}(e,s,r,t)&&o.push(s)}return o}(e,l,t,r):function(e,l,t){let r=[],o="white"===t?-1:1,c={x:e.x,y:e.y+o};if(n(c)&&!l[c.y][c.x]){r.push(c);let n={x:e.x,y:e.y+2*o};e.y!==("white"===t?6:1)||l[n.y][n.x]||r.push(n)}for(let c of[-1,1]){var a;let s={x:e.x+c,y:e.y+o};n(s)&&l[s.y][s.x]&&(null===(a=l[s.y][s.x])||void 0===a?void 0:a.color)!==t&&r.push(s)}return r}(e,l,t),rook:a,knight:s,bishop:u,queen:i,king:(e,l,t,r)=>r?function(e,l,t,r){let o=[];for(let{dx:r,dy:n}of[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1},{dx:1,dy:1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:-1,dy:-1}]){let a={x:e.x+r,y:e.y+n};c(l,a,t)&&o.push(a)}return("white"===t&&4===e.x&&7===e.y||"black"===t&&4===e.x&&0===e.y)&&(function(e,l){let t=7*("white"===e),r="".concat(4,",").concat(t),o="".concat(7,",").concat(t);if(l.hasMoved[r]||l.hasMoved[o])return!1;for(let e=5;e<7;e++)if(l.board[t][e])return!1;for(let r=4;r<=6;r++)if(p({x:r,y:t},l.board,"white"===e?"black":"white"))return!1;return!0}(t,r)&&o.push({x:6,y:e.y}),function(e,l){let t=7*("white"===e),r="".concat(4,",").concat(t),o="".concat(0,",").concat(t);if(l.hasMoved[r]||l.hasMoved[o])return!1;for(let e=1;e<4;e++)if(l.board[t][e])return!1;for(let r=2;r<=4;r++)if(p({x:r,y:t},l.board,"white"===e?"black":"white"))return!1;return!0}(t,r)&&o.push({x:2,y:e.y})),o}(e,l,t,r):d(e,l,t)},y={"♙":{type:"pawn",color:"white"},"♖":{type:"rook",color:"white"},"♘":{type:"knight",color:"white"},"♗":{type:"bishop",color:"white"},"♕":{type:"queen",color:"white"},"♔":{type:"king",color:"white"},"♟":{type:"pawn",color:"black"},"♜":{type:"rook",color:"black"},"♞":{type:"knight",color:"black"},"♝":{type:"bishop",color:"black"},"♛":{type:"queen",color:"black"},"♚":{type:"king",color:"black"}};function x(e){return e.map(e=>e.map(e=>e?{...y[e]}:null))}let f=()=>{let[e,l]=(0,o.useState)([["♜","♞","♝","♛","♚","♝","♞","♜"],["♟","♟","♟","♟","♟","♟","♟","♟"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["♙","♙","♙","♙","♙","♙","♙","♙"],["♖","♘","♗","♕","♔","♗","♘","♖"]]),[t,n]=(0,o.useState)(!1),[c,a]=(0,o.useState)(null),[s,u]=(0,o.useState)(null),[i,d]=(0,o.useState)(null),[f,w]=(0,o.useState)([]),[m,k]=(0,o.useState)(null),b=(0,o.useRef)(null),[v,g]=(0,o.useState)({}),[N,j]=(0,o.useState)(null),[S,M]=(0,o.useState)([]),[O,q]=(0,o.useState)("white"),[C,T]=(0,o.useState)(600),[_,E]=(0,o.useState)(600),P=(0,o.useRef)(null),[F,I]=(0,o.useState)([]),[R,H]=(0,o.useState)([]),[Y,B]=(0,o.useState)([]),L=t?[1,2,3,4,5,6,7,8]:[8,7,6,5,4,3,2,1],U=t?["h","g","f","e","d","c","b","a"]:["a","b","c","d","e","f","g","h"],z=(e,l)=>({actualRow:t?7-e:e,actualCol:t?7-l:l}),A=(e,l)=>f.some(t=>t.x===l&&t.y===e);function D(e){return{board:e,moveHistory:S,hasMoved:v,enPassantTarget:N}}function G(e){let l=Math.floor(e/60);return"".concat(l,":").concat((e%60).toString().padStart(2,"0"))}(0,o.useEffect)(()=>(P.current&&clearInterval(P.current),P.current=setInterval(()=>{"white"===O?T(e=>e>0?e-1:0):E(e=>e>0?e-1:0)},1e3),()=>{P.current&&clearInterval(P.current)}),[O]);let J=(t,r)=>{var o,n;let{actualRow:s,actualCol:i}=z(t,r);if(!c){let l=null===(n=e[s])||void 0===n?void 0:n[i];if(!l){d({row:s,col:i}),w([]);return}let t=y[l];if(t.color!==O)return;a({row:s,col:i}),u({from:{row:s,col:i},to:{row:s,col:i}}),d(null);let r=x(e),o=D(r);w(h[t.type]({x:i,y:s},r,t.color,o));return}let{row:f,col:m}=c,C=e[f][m];if(!C){a(null),w([]);return}let T=y[C];if(T.color!==O){a(null),w([]);return}if(A(s,i)){if(function(e,l,t,r,o){let n=r.map(e=>[...e]),c=n[e.row][e.col];"king"===t.type&&2===Math.abs(l.col-e.col)?6===l.col?(n[e.row][4]=null,n[e.row][6]=c,n[e.row][7]=null,n[e.row][5]="white"===t.color?"♖":"♜"):2===l.col&&(n[e.row][4]=null,n[e.row][2]=c,n[e.row][0]=null,n[e.row][3]="white"===t.color?"♖":"♜"):"pawn"===t.type&&o&&l.col===o.x&&l.row===o.y?(n[l.row][l.col]=c,n[e.row][e.col]=null,n[e.row][l.col]=null):(n[l.row][l.col]=c,n[e.row][e.col]=null);let a="white"===t.color?"♔":"♚",s=null;for(let e=0;e<8;e++)for(let l=0;l<8;l++)n[e][l]===a&&(s={x:l,y:e});return"king"===t.type&&(s={x:l.col,y:l.row}),!s||p(s,x(n),"white"===t.color?"black":"white")}({row:f,col:m},{row:s,col:i},T,e,N)){k({row:f,col:m}),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{k(null)},1200);return}let t=e[f][m],r=t?y[t]:null,o=!1,n=null,c=null;r&&"king"===r.type&&2===Math.abs(i-m)&&(o=!0,6===i?(n={x:7,y:f},c={x:5,y:f}):2===i&&(n={x:0,y:f},c={x:3,y:f}));let h=!1,C=null;r&&"pawn"===r.type&&N&&i===N.x&&s===N.y&&(h=!0,C={row:f,col:i});let _=e.map(e=>[...e]);o&&n&&c?(_[s][i]=e[f][m],_[f][m]=null,_[c.y][c.x]=e[n.y][n.x],_[n.y][n.x]=null):h&&C?(_[s][i]=e[f][m],_[f][m]=null,_[C.row][C.col]=null):(_[s][i]=e[f][m],_[f][m]=null);let E={...v};r&&(E["".concat(m,",").concat(f)]=!0,o&&n&&(E["".concat(n.x,",").concat(n.y)]=!0));let P=null;r&&"pawn"===r.type&&2===Math.abs(s-f)&&(P={x:m,y:(f+s)/2});let F={from:{x:m,y:f},to:{x:i,y:s},piece:r,isCastling:o,isEnPassant:h,captured:h&&C?e[C.row][C.col]?y[e[C.row][C.col]]:null:e[s][i]?y[e[s][i]]:null};l(_),g(E),j(P),M([...S,F]),u({from:{row:f,col:m},to:{row:s,col:i}}),a(null),d(null),w([]),function(e){let l="white"===e.piece.color;I(t=>{let r=function(e,l,t){if(e.isCastling){if(6===e.to.x)return"O-O";if(2===e.to.x)return"O-O-O"}let r="abcdefgh",o="pawn"===e.piece.type?"":e.piece.type[0].toUpperCase(),n=e.captured?"x":"",c=r[e.to.x]+(8-e.to.y);return"pawn"===e.piece.type&&e.captured?r[e.from.x]+"x"+c:o+n+c}(e,Math.floor(t.length/2),0);if(l)return[...t,{white:r}];{if(0===t.length)return[{black:r}];let e=t[t.length-1];return[...t.slice(0,-1),{...e,black:r}]}})}(F),function(e){if(e.captured&&e.captured.type){let l={white:{pawn:"♙",rook:"♖",knight:"♘",bishop:"♗",queen:"♕",king:"♔"},black:{pawn:"♟",rook:"♜",knight:"♞",bishop:"♝",queen:"♛",king:"♚"}}[e.captured.color][e.captured.type];"white"===e.piece.color?B(e=>[...e,l]):H(e=>[...e,l])}}(F),q("white"===O?"black":"white")}else if(null===(o=e[s])||void 0===o?void 0:o[i]){let l=e[s][i];if(!l)return;let t=y[l];if(t.color!==O)return;a({row:s,col:i}),u({from:{row:s,col:i},to:{row:s,col:i}}),d(null);let r=x(e),o=D(r);w(h[t.type]({x:i,y:s},r,t.color,o))}else c&&(k({row:c.row,col:c.col}),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{k(null)},1200)),a(null),d({row:s,col:i}),w([])};return(0,r.jsxs)("div",{className:"chess-layout",children:[(0,r.jsx)("div",{className:"chessboard-panel",children:(0,r.jsxs)("div",{className:"chess-container",children:[(0,r.jsx)("div",{className:"chess-board",children:(t?[...e].reverse():e).map((e,l)=>(t?[...e].reverse():e).map((e,t)=>{let{actualRow:o,actualCol:n}=z(l,t),a=s&&s.from.row===o&&s.from.col===n,u=s&&s.to.row===o&&s.to.col===n,d=i&&i.row===o&&i.col===n,p=c&&A(o,n),h=m&&m.row===o&&m.col===n;return(0,r.jsxs)("div",{className:"chess-square ".concat((l+t)%2==0?"light":"dark"," ").concat(a||u?"green-highlight":""," ").concat(d?"yellow-highlight":""," ").concat(p?"highlight":""," ").concat(h?"red-blink":""),onClick:()=>J(l,t),children:[e&&(0,r.jsx)("span",{className:"chess-piece",children:e}),0===t&&(0,r.jsx)("span",{className:"row-label",children:L[l]}),7===l&&(0,r.jsx)("span",{className:"column-label",children:U[t]})]},"".concat(l,"-").concat(t))}))}),(0,r.jsx)("button",{className:"flip-button",onClick:()=>{n(!t),d(null),c&&a({row:7-c.row,col:7-c.col})},children:"Flip Board"})]})}),(0,r.jsxs)("div",{className:"info-panel",children:[(0,r.jsx)("div",{className:"info-left",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"clock player-clock",children:["You: ",G(C)]}),(0,r.jsx)("div",{className:"captured-pieces captured-by-player",children:0===Y.length?(0,r.jsx)("span",{className:"captured-placeholder",children:"No captures"}):Y.map((e,l)=>(0,r.jsx)("span",{className:"captured-piece",children:e},l))}),(0,r.jsx)("div",{className:"info-separator"}),(0,r.jsx)("div",{className:"captured-pieces captured-by-opponent",children:0===R.length?(0,r.jsx)("span",{className:"captured-placeholder",children:"No captures"}):R.map((e,l)=>(0,r.jsx)("span",{className:"captured-piece",children:e},l))}),(0,r.jsxs)("div",{className:"clock opponent-clock",children:["Opponent: ",G(_)]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"clock opponent-clock",children:["Opponent: ",G(_)]}),(0,r.jsx)("div",{className:"captured-pieces captured-by-opponent",children:0===R.length?(0,r.jsx)("span",{className:"captured-placeholder",children:"No captures"}):R.map((e,l)=>(0,r.jsx)("span",{className:"captured-piece",children:e},l))}),(0,r.jsx)("div",{className:"info-separator"}),(0,r.jsx)("div",{className:"captured-pieces captured-by-player",children:0===Y.length?(0,r.jsx)("span",{className:"captured-placeholder",children:"No captures"}):Y.map((e,l)=>(0,r.jsx)("span",{className:"captured-piece",children:e},l))}),(0,r.jsxs)("div",{className:"clock player-clock",children:["You: ",G(C)]})]})}),(0,r.jsxs)("div",{className:"info-right",children:[(0,r.jsx)("div",{className:"move-list-title",children:"Move List"}),(0,r.jsx)("div",{className:"move-list",children:F.map((e,l)=>(0,r.jsx)("div",{className:"move-list-row",children:"".concat(l+1,". ").concat(e.white||"").concat(e.black?" "+e.black:"")},l))})]})]})]})}},3520:()=>{},9702:(e,l,t)=>{Promise.resolve().then(t.bind(t,3455))}},e=>{var l=l=>e(e.s=l);e.O(0,[305,441,684,358],()=>l(9702)),_N_E=e.O()}]);